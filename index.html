<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="fevicon.ico">
  <title>ResumeFox AI â€” Prototype</title>

  <style>
    :root{
      --bg:#ffffff;
      --muted:#6b7280;
      --accent:#ff914d;
      --btn-bg:#e6f0ff;
      --success:#16a34a;
      --warning:#f59e0b;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    body{
      margin:0;
      min-height:100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background:#f8fafc;
      padding:24px;
    }

    .card{
      width:100%;
      max-width:900px;
      background:#fff;
      border-radius:16px;
      box-shadow:0 6px 24px rgba(0,0,0,0.06);
      padding:40px;
      text-align: center;
    }

    h1{ margin:0; font-size:34px; }
    .subtitle{ color:var(--muted); margin:10px 0 30px; }

    .btn{
      border:0;
      border-radius:999px;
      padding:14px 24px;
      cursor: pointer;
      font-weight:600;
      min-width:220px;
    }

    .btn-upload{ background:var(--btn-bg); }
    .btn-cta{ background:var(--accent); color:white; }

    input[type="file"]{ display:none; }

    .small{ color:var(--muted); font-size:13px; margin-top:6px; }

    .upload-row{
      display: flex;
      flex-direction: column;
      gap:16px;
      align-items: center;
    }

    .processing,
    .results{
      display: none;
      width:100%;
      margin-top:30px;
    }

    .spinner{
      width:48px;
      height:48px;
      border-radius:50%;
      border:5px solid #eee;
      border-top-color:var(--accent);
      animation:spin 1s linear infinite;
      margin: auto;
    }

    @keyframes spin{
      to{ transform:rotate(360deg); }
    }

    .score{
      font-size:26px;
      font-weight:700;
      color:#2563eb;
      margin-bottom:20px;
    }

    .cols{
      display: flex;
      flex-direction:c olumn;
      gap:30px;
      align-items:c enter;
    }

    ul{ padding-left:18px; color:var(--muted); }

    .action-pill{
      display:inline-block;
      padding:10px 18px;
      border-radius:999px;
      font-weight:700;
      color:w hite;
      margin-top:10px;
    }

    footer{
      margin-top:28px;
      font-size:13px;
      color:var(--muted);
    }
  </style>
</head>

<body>

<div class="card">
  <h1>ResumeFox AI ðŸ¦Š</h1>
  <div class="subtitle">Smart Resume-to-Job Matching Tool</div>

  <!-- Upload -->
  <div class="upload-row" id="uploadSection">
    <label class="btn btn-upload">
      <input id="fileResume" type="file" accept=".txt">
      Upload Resume
    </label>
    <div id="resumeStatus" class="small"></div>

    <label class="btn btn-upload">
      <input id="fileJD" type="file" accept=".txt">
      Upload Job Description
    </label>
    <div id="jdStatus" class="small"></div>

    <button id="analyzeBtn" class="btn btn-cta">Analyze Match</button>
    <div class="small">Upload small .txt files for demo</div>
  </div>

  <!-- Processing -->
  <div id="processing" class="processing">
    <div class="spinner"></div>
    <div style="font-weight:700;margin-top:10px">Analyzing Resumeâ€¦</div>
    <div class="small">Fox is reviewing your resumeâ€¦</div>
  </div>

  <!-- Results -->
  <div id="results" class="results">
    <div class="score" id="scoreText">Match Score: 0 / 100</div>

    <div class="cols">
      <div>
        <b>Strengths</b>
        <ul id="strengthsList"></ul>
      </div>

      <div>
        <b>Weaknesses</b>
        <ul id="weaknessesList"></ul>
      </div>
    </div>

    <div style="margin-top:20px">
      <b>Recommended Action</b><br>
      <span id="actionPill" class="action-pill">Review</span>
    </div>

    <div style="margin-top:20px">
      <button id="again" class="btn btn-upload">Analyze Another</button>
    </div>
  </div>

  <footer>Powered by ResumeFox AI â€” Demo Version</footer>
</div>

<script>
  const fileResume = document.getElementById("fileResume");
  const fileJD = document.getElementById("fileJD");
  const resumeStatus = document.getElementById("resumeStatus");
  const jdStatus = document.getElementById("jdStatus");

  const uploadSection = document.getElementById("uploadSection");
  const processing = document.getElementById("processing");
  const results = document.getElementById("results");

  let resumeText = "";
  let jdText = "";

  function resetUI(){
    processing.style.display = "none";
    results.style.display = "none";
  }

  function showProcessing(){
    resetUI();
    processing.style.display = "block";
  }

  function showResultsUI(){
    resetUI();
    results.style.display = "block";
  }

  function readFile(file){
    return new Promise((resolve)=>{
      const r = new FileReader();
      r.onload = ()=>resolve(r.result);
      r.readAsText(file);
    });
  }

  fileResume.onchange = async e => {
    resumeText = await readFile(e.target.files[0]);
    resumeStatus.textContent = "Resume Uploaded âœ”";
  };

  fileJD.onchange = async e => {
    jdText = await readFile(e.target.files[0]);
    jdStatus.textContent = "Job Description Uploaded âœ”";
  };

  document.getElementById("analyzeBtn").onclick = async () => {
    if(!resumeText || !jdText){
      alert("Upload both files first");
      return;
    }

    showProcessing();

    try{
      const res = await fetch(
        "https://ankitasuryawanshi400.app.n8n.cloud/webhook/resumefox-compare",
        {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body:JSON.stringify({ resume:resumeText, jd:jdText })
        }
      );

      const data = await res.json();
      const score = data.score || 0;
      const strengths = data.strengths || [];
      const weaknesses = data.weaknesses || [];
      const action = data.recommended_action || "Review";

      document.getElementById("scoreText").textContent = `Match Score: ${score} / 100`;

      const sList = document.getElementById("strengthsList");
      const wList = document.getElementById("weaknessesList");
      sList.innerHTML = strengths.map(s=>`<li>${s}</li>`).join("") || "<li>â€”</li>";
      wList.innerHTML = weaknesses.map(w=>`<li>${w}</li>`).join("") || "<li>â€”</li>";

      const pill = document.getElementById("actionPill");
      pill.textContent = action;
      pill.style.background = action==="Interview" ? "#16a34a" : "#f59e0b";

      showResultsUI();

    }catch{
      alert("Backend error â€” check n8n");
      resetUI();
    }
  };

  document.getElementById("again").onclick = ()=>{
    resetUI();
    resumeText = jdText = "";
    resumeStatus.textContent = "";
    jdStatus.textContent = "";
    fileResume.value = "";
    fileJD.value = "";
  };
</script>

</body>
</html>

